<!DOCTYPE html>
<html>
<head>
    <meta name="viewport" content="width=device-width,initial-scale=1,maximum-scale=1,user-scalable=no">
    <title>Fuckass Timetable</title>
    <style>
        /* ** THEME VARIABLES (Light Mode Default) ** */
        :root{
            --bg: #ffffff;
            --text: #111111;
            --card: #f7f7f8;
            --card-border: #eee;
            --muted: #9b9b9b;
            --input-bg: white;
            --input-border: #111;
            --primary-btn-bg: #111;
            --primary-btn-text: white;
            --secondary-btn-bg: #fff;
            --secondary-btn-border: #111;
            --yellow-light: #ffd54e;
            --soft-shadow: 0 6px 18px rgba(12,12,14,0.06);
            --radius: 14px;
            /* Person colors */
            --color-red: #f44336;
            --color-blue: #2196f3;
            --color-pink: #e91e63;
            --color-yellow: #ffeb3b;
            --color-darkgreen: #00796b;
        }

        /* ** DARK MODE OVERRIDES ** */
        body.dark-mode {
            --bg: #111111;
            --text: #f0f0f0;
            --card: #1c1c1e;
            --card-border: #333333;
            --muted: #b0b0b0;
            --input-bg: #2c2c2e;
            --input-border: #444;
            --primary-btn-bg: #eeeeee;
            --primary-btn-text: #111;
            --secondary-btn-bg: #1c1c1e;
            --secondary-btn-border: #444;
            --soft-shadow: 0 6px 18px rgba(0, 0, 0, 0.4);
            /* Adjust Yellow for better contrast in dark mode */
            --yellow-light: #ffc107;
        }

        /* Base Styles */
        html,body{
            height:100%;
            margin:0;
            font-family:-apple-system, BlinkMacSystemFont, "SF Pro Text", "Helvetica Neue", Arial, sans-serif;
            background:var(--bg);
            color:var(--text); 
            overflow-x: hidden;
            transition: background 0.3s, color 0.3s;
        }
        
        body {
            display: flex;
            justify-content: center;
            align-items: center; 
            min-height: 100vh;
            overflow-y: auto;
            padding: 20px 0; 
        }
        
        .wrap{
            max-width:470px;
            width: 95%; 
            padding:16px;
            box-sizing: border-box; 
        }
        
        .title {
            font-weight:700;
            text-align:center;
            font-size:28px;
            letter-spacing:-0.6px;
            margin-bottom:12px;
            position:relative;
        }
        .tag {
            position:absolute;
            right:6%;
            top:-8px;
            transform: rotate(-25deg);
            color:#333333 !important;
            background:linear-gradient(90deg, var(--yellow-light), rgba(255,248,200,0.95));
            padding:6px 10px;
            border-radius:10px;
            box-shadow: var(--soft-shadow);
            opacity:0;
            animation: tagIn 700ms ease forwards;
            font-weight:700;
            font-size:12px;
            border: 1px solid rgba(0,0,0,0.1);
        }
        @keyframes tagIn{
            from { transform: rotate(-45deg) translateY(-10px); opacity:0; }
            to { transform: rotate(-25deg) translateY(0); opacity:1; }
        }

        /* Dark Mode Toggle Button */
        #darkModeToggle {
            position: absolute;
            left: 10px;
            top: 50%;
            transform: translateY(-50%);
            font-size: 22px;
            cursor: pointer;
            transition: transform 0.1s ease;
            z-index: 10;
        }
        #darkModeToggle:active {
            transform: translateY(-50%) scale(0.9);
        }

        .card { background:var(--card); border-radius:var(--radius); padding:14px; box-shadow:var(--soft-shadow); margin-bottom:12px; transition: background 0.3s, box-shadow 0.3s; }
        label{display:block;font-size:13px;color:var(--muted);margin-bottom:6px; transition: color 0.3s;}
        
        /* Form Elements */
        select, button, input[type="text"] {
            width:100%; /* Ensure full width */
            padding:12px 14px; border-radius:12px; border:2px solid var(--input-border); outline:none; font-size:15px;
            background:var(--input-bg); color:var(--text); box-sizing:border-box;
            min-width: 0; transition: background 0.3s, border-color 0.3s, color 0.3s;
            margin-bottom: 0; 
        }
        
        .select-group select {
            margin-bottom: 10px; 
        }

        .row{
            display:flex;
            gap:10px;
            flex-wrap: wrap; 
        }
        .row > * { 
            flex:1; 
            min-width: 100%; 
        }
        
        @media (min-width: 380px) {
            .row > * {
                min-width: 0; 
            }
        }
        
        .row select {
             margin-bottom: 8px; 
        }
        .btn { cursor:pointer; border:none; font-weight:700; background:var(--primary-btn-bg);color:var(--primary-btn-text); border-radius:12px;padding:12px; transition:transform .18s ease, background 0.3s, color 0.3s; }
        .btn:active{ transform:scale(.98); }
        #lessonBtn { background:var(--secondary-btn-bg);color:var(--text);border:2px solid var(--secondary-btn-border); }

        .result { padding:12px; margin-top:12px; border-radius:12px; background:var(--input-bg); border:1px solid var(--card-border); min-height:60px; transition: background 0.3s, border-color 0.3s; }
        .person { display:flex; gap:10px; align-items:center; padding:8px; border-radius:10px; margin-bottom:8px; }
        .swatch{width:14px;height:14px;border-radius:5px;box-shadow:0 2px 6px rgba(0,0,0,0.06);}
        .muted{color:var(--muted);font-size:13px}
        .extra { margin-top:8px; display:flex; gap:8px; }
        .small { padding:8px 10px; font-size:14px; border-radius:10px; background:var(--input-bg); border:1px solid var(--card-border); color:var(--text); cursor:pointer; transition: background 0.3s, border-color 0.3s, color 0.3s; }
        .collapse { max-height:0; overflow:hidden; transition:max-height .35s cubic-bezier(.2,.9,.3,1); }
        .collapse.open { max-height:420px; }
        hr { border-top-color: var(--card-border) !important; transition: border-top-color 0.3s; }

        .person { transform: translateY(6px); opacity:0; animation: personIn .35s forwards; }
        /* Staggered delay for person list */
        .person:nth-child(2){ animation-delay:50ms } 
        .person:nth-child(3){ animation-delay:100ms }
        .person:nth-child(4){ animation-delay:150ms } 
        .person:nth-child(5){ animation-delay:200ms } 
        @keyframes personIn { to{ transform:none; opacity:1 } from { transform:translateY(6px); opacity:0 } }

        /* Modal Styles */
        .modalBack{ position:fixed; inset:0; display:flex; align-items:center; justify-content:center; background:rgba(10,10,10,0.55); z-index:1000; }
        .modal{ width:90%; max-width:420px; background:var(--card); border-radius:12px; padding:14px; box-shadow:var(--soft-shadow); color:var(--text); transition: background 0.3s; }
        .tiny{font-size:13px;color:var(--muted); margin-top:8px}
        
        /* Schedule Modal Styles */
        .scheduleModalBack {
            position: fixed;
            inset: 0;
            background: rgba(10, 10, 10, 0.75);
            z-index: 1010;
            display: none;
            align-items: center;
            justify-content: center;
            backdrop-filter: blur(5px);
        }
        .scheduleModal {
            width: 90%;
            max-width: 400px;
            max-height: 80vh; 
            background: var(--card);
            border-radius: 18px;
            padding: 20px;
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.2);
            overflow-y: auto; 
            transition: background 0.3s;
        }
        .scheduleRow{ display: flex; gap: 8px; margin: 6px 0; align-items: center; }
        .scheduleCell{ padding: 8px; border-radius: 8px; border: 1px solid var(--card-border); text-align: left; background: var(--input-bg); transition: background 0.3s; }
        .pnum { width: 50px; text-align: center; font-weight: 600; flex-shrink: 0; background: var(--card); color: var(--text); border: 1px solid var(--card-border); }
        .subj { flex-grow: 1; }
        
        .modalClose {
            font-size: 24px;
            font-weight: 300;
            cursor: pointer;
            color: var(--muted);
        }
        
        @media (max-width:420px){
            .wrap{
                padding:12px;
            }
            .title{font-size:22px}
        }
    </style>
</head>
<body>
    <div class="wrap">
        <div class="title card">
            <div style="position:relative">
                <div style="font-size:28px;">Fuckass Timetable</div>
                <div id="randomTag" class="tag" aria-hidden="true"></div>
                <div id="darkModeToggle" role="button" aria-label="Toggle Dark Mode">☀️</div>
            </div>
        </div>

        <div class="card">
            <div class="select-group">
                <label>Week</label>
                <select id="weekSelect"></select>
            </div>

            <div class="select-group">
                <label style="margin-top:10px">Day</label>
                <select id="daySelect"></select>
            </div>

            <div class="select-group">
                <label style="margin-top:10px">Period</label>
                <select id="periodSelect">
                    <option value="1">Period 1</option>
                    <option value="2">Period 2</option>
                    <option value="3">Period 3</option>
                    <option value="4">Period 4</option>
                    <option value="5">Period 5</option>
                </select>
            </div>

            <div style="display:flex; gap:10px; margin-top:12px;">
                <button class="btn" id="checkBtn">Check who's free</button>
                <button class="btn" id="lessonBtn" style="background:var(--secondary-btn-bg);color:var(--text);border:2px solid var(--secondary-btn-border);">Who has a lesson</button>
            </div>

            <div id="resultArea" class="result"></div>
        </div>

        <div class="card">
            <div style="display:flex; justify-content:space-between; align-items:center;">
                <div><strong>Extra features</strong><div class="tiny">Add catchphrase / What do I have today</div></div>
                <button id="toggleExtra" class="small">Show</button>
            </div>

            <div id="extraPanel" class="collapse">
                <div style="margin-top:12px;">
                    <label>Add a catchphrase</label>
                    <input type="text" id="phraseInput" placeholder="Type phrase...">
                    <div style="display:flex; gap:8px; margin-top:8px;">
                        <button id="addPhraseBtn" class="small">Add phrase</button>
                        <button id="refreshTag" class="small">Refresh random tag</button>
                    </div>
                </div>

                <hr style="margin:12px 0;border:none;border-top:1px solid var(--card-border);">

                <div>
                    <label>What do I have today?</label>
                    <div class="row">
                        <select id="whoSelect"></select>
                        <select id="weekSelect2"></select>
                    </div>
                    <select id="daySelect2" style="margin-top:8px;width:100%"></select>
                    <button id="whatBtn" class="btn" style="margin-top:10px">Show my day</button>
                </div>
            </div>
        </div>

        <div style="text-align:center; color:var(--muted); font-size:13px; margin-top:8px">Made for iPhone — © Alessandro 2025</div>
    </div>

    <div id="confirmModal" style="display:none;"></div>

    <div id="scheduleModalBack" class="scheduleModalBack">
        <div id="scheduleModal" class="scheduleModal">
            <div class="modalHeader">
                <h3 id="scheduleTitle" style="margin:0;">Schedule</h3>
                <span id="scheduleClose" class="modalClose">&times;</span>
            </div>
            <div id="modalScheduleContent">
                </div>
        </div>
    </div>

<script src="script.js"></script>
</body>
</html>
